<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        div {
            height: 100px;
            width: 100px;
            opacity: 1;
            background: red;
        }
    </style>
</head>

<body>
    <div></div>
    <script>
        var oDiv = document.getElementsByTagName('div')[0];
        var timer = null;
        oDiv.onclick = function () {
            startMove(this, 50);
        }
        //获取计算样式，获取opacity用
        function getStyle(elem, prop) {
            if (window.getComputedStyle) {
                //ie8及以下不兼容
                return window.getComputedStyle(elem, null)[prop];
            } else {
                //ie独有
                return elem.currentStyle[prop];//ie
            }
        }
        function startMove(ele,target){
            clearInterval(timer);
            var iSpeed, iCur;
            timer = setInterval(function(){
                // iCur 当前opacity值
                iCur = parseFloat(getStyle(ele,"opacity")) * 100;
                //   target  目标opacity值
                iSpeed = (target - iCur) / 7;
                iSpeed = iSpeed > 0 ? Math.ceil(iSpeed) : Math.floor(iSpeed);
                if(iCur == target){
                    clearInterval(timer);
                }else{
                    ele.style.opacity = (iCur + iSpeed) / 100;
                }
            },30)
        }
    </script>
</body>

</html>